<!doctype html>
<html ng-app="InvertedIndexApp">
  <head>

    <title>Inverted Index</title>

    <!--<link rel="stylesheet" type="text/css" href="./css/style.css" /> -->
    <link href="https://fonts.googleapis.com/css?family=Montserrat" rel="stylesheet">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.5.8/angular.js"></script>
    <script src="js/invertedIndex.js" type="text/javascript"> </script>
    <script type="text/javascript" src="./js/app.js"></script>
    <script type="text/javascript" src="./services/angular.js"></script>

  </head>
  <body ng-controller="IndexController">
    <div id="container">
        <div id="wrapper">
          <!-- Top navbar -->
          <!-- <div class="navbar navbar-default navbar-fixed-top" role="navigation">
            <div class="container">
              <div class="navbar-header">
                <a class="navbar-brand" href="#">Inverted Index</a>
              </div>
            </div>
          </div> -->
          <!-- End navbar -->

            <div class="text-center text-danger errMsg">{{ errorHandler }}</div>
            <form class="form-inline">
              <div class="form-group">
                <input type="text" class="form-control" ng-model="phrase">
              </div>
              <div id = "main" ng-show="fileNames.length > 0">
                <p> Select a file to create Index </p>
                <select ng-model="searchOption">
                  <option>All</option>
                  <option ng-repeat="filename in fileNames | orderBy:filename">{{filename}}</option>
                </select>
                <button type="submit" class="btn btn-default" ng-click="displaySearch()">Search</button>
              </div>
            </form>
            <form class="form-inline" name="uploadFile">
              <div class="form-group" >
                <label for="upload" class="btn btn-success">Upload</label>
                <input style="display:none" type='file' id ='upload'>
              </div>

           <div id = "main" ng-show="fileNames.length > 0">
             <p> Select a file to create Index </p>
             <select ng-model="getFile">
               <option ng-repeat="filename in fileNames | orderBy:filename">{{filename}}</option>
             </select>
             <button type="submit" class="btn btn-default" ng-click="displayIndex()">Create Index</button>
           </div>
            </form>

            <div ng-if="displayIndexes">
               <div>
                 <div class='tableArea'>
                  <table class="table table-striped" ng-if="displayIndexes">
                    <thead>
                      <th> Showing Index for {{ getFile }}</th>
                      <tr>
                        <th> Keywords</th>
                        <th ng-repeat="doc_num in [] | range:indexedFiles.numOfDocs"> Document {{doc_num + 1}}</th>
                      </tr>
                    </thead>
                    <tbody>
                      <tr ng-repeat="(eachWord, documents) in indexedFiles.eachWord">
                        <td class="divider">{{eachWord}}</td>
                        <td ng-repeat="doc_num in [] | range:indexedFiles.numOfDocs">
                          <span ng-if="documents.indexOf(doc_num) !== -1" class="text-center">x</span>
                        </td>
                      </tr>
                    </tbody>
                  </table>
                </div>
              </div>
            </div>

            <div ng-if="displaySearchResult">
               <div ng-repeat="(filename, result) in searchResults">
                   <div class='tableArea'>
                     <table class="table table-striped">
                       <thead>
                         <th> Showing Index for {{fileName}}</th>
                         <tr>
                           <th> Keywords</th>
                           <th ng-repeat="doc_num in [] | range:searchResults.numOfDocs"> Document {{doc_num + 1}}</th>
                         </tr>
                       </thead>
                       <tbody>
                         <tr ng-repeat="(eachWord, documents) in searchResults.eachWord">
                           <td class="divider">{{eachWord}}</td>
                           <td ng-repeat="doc_num in [] | range:searchResults.numOfDocs">
                             <span ng-if="documents.indexOf(doc_num) !== -1" class="text-center">x</span>
                           </td>
                         </tr>
                       </tbody>
                     </table>
                   </div>
               </div>
            </div>

            </div>
        </div>

    </div>
    <!-- <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.5.6/angular.min.js"></script>
    <script src="js/app.js"></script> -->
</body>
